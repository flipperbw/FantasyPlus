"use strict";var url_base="//www.fleaflicker.com",url_nfl="nfl/leagues";league_id=document.URL.match(new RegExp("/"+url_nfl+"/("+num_rgx+")"))[1],league_settings_url="//www.fleaflicker.com/"+url_nfl+"/"+league_id+"/scoring",onMatchupPreviewPage=new RegExp("/"+url_nfl+"/"+num_rgx+"/scores/"+num_rgx).test(document.URL),onClubhousePage=new RegExp("/"+url_nfl+"/"+num_rgx+"/teams/"+num_rgx+"(\\?|$)").test(document.URL),onFreeAgencyPage=new RegExp("/"+url_nfl+"/"+num_rgx+"/players([^/]|$)").test(document.URL),onGeneralProjPage=new RegExp("/"+url_nfl+"/"+num_rgx+"/teams/"+num_rgx+"/watched").test(document.URL),hasProjTotals=onMatchupPreviewPage||onClubhousePage,hasPlayerTable=onFreeAgencyPage||onMatchupPreviewPage,hasProjectionTable=onMatchupPreviewPage||onClubhousePage||onFreeAgencyPage||onGeneralProjPage,base_table_selector="#body-center-main",player_table_selector="table",player_table_body_selector="tbody",player_table_header_selector="thead tr",player_table_row_selector="tr:not(:has(td.vertical-spacer))",player_name_selector="div.player",storageLeagueKey="fp_fleaflicker_league_data_"+league_id,storageLeagueUpdateKey="fp_fleaflicker_last_updated_league_"+league_id,storagePlayerKey="fp_fleaflicker_player_data_"+league_id,storageUpdateKey="fp_fleaflicker_last_updated_"+league_id,storageUpdateTypeKey="fp_fleaflicker_last_updated_type_"+league_id,storageTranslationKey="fp_fleaflicker_translation",storageKeys.push(storageLeagueKey,storageLeagueUpdateKey,storagePlayerKey,storageUpdateKey,storageUpdateTypeKey,storageTranslationKey),show_avg=!1,show_med=!1,show_current=!1;var fetchFleaflickerIds=jQuery.Deferred(),total_player_ids=0,is_current_week=!0;function fixPage(){if(remove_ads&&(jQuery("a[href^=\"/nfl/upgrade\"]").remove(),jQuery("i.icon-edge-E").remove(),jQuery(".alert-banner-edge").remove()),fix_css&&(onFreeAgencyPage||onGeneralProjPage)){var a=jQuery("a"),b=a.filter(function(){return"Trade"===jQuery(this).text()});b.css({"background-image":"linear-gradient(to bottom,#a070ec 0%,#6c4186 100%)","border-color":"#51427d"}),b.hover(function(){jQuery(this).css("background-color","rgb(108, 65, 134)")});var c=a.filter(function(){return"Claim"===jQuery(this).text()});c.css({"background-image":"linear-gradient(to bottom,#fbbc4a 0%,#d68306 100%)","border-color":"#9c6315"}),c.hover(function(){jQuery(this).css("background-color","#d68306")})}}function setSelectors(){base_table=jQuery(base_table_selector),playerTable=base_table.find(player_table_selector),player_table_body=playerTable.find(player_table_body_selector),player_table_header=playerTable.find(player_table_header_selector),player_table_rows=player_table_body.find(player_table_row_selector),show_proj=!("undefined"!=typeof user_settings.columns.proj)||user_settings.columns.proj,show_rank=!("undefined"!=typeof user_settings.columns.rank)||user_settings.columns.rank,show_ros=!("undefined"!=typeof user_settings.columns.ros)||user_settings.columns.ros,show_spark=!("undefined"!=typeof user_settings.columns.spark)||user_settings.columns.spark,player_table_header_proj_selector="Proj";var a=window.location.search,b=getParams(a),c="statRange";onClubhousePage&&(c="week");var d=b.hasOwnProperty(c)?b[c][0]:"";d&&d!==current_week&&(is_current_week=!1);var e=b.hasOwnProperty("season")?b.season[0]:"";e&&e!==current_season&&(is_current_week=!1);var f=b.hasOwnProperty("statType")?b.statType[0]:"",g=b.hasOwnProperty("sortMode")?b.sortMode[0]:"";onFreeAgencyPage&&(f&&"7"===f?(player_table_header_proj_selector="FPts",show_spark=!1):g&&"0"!==g&&(player_table_header_proj_selector="FPts")),is_current_week||(hasProjectionTable=!1),proj_head=player_table_header.find("th").filter(function(){return jQuery(this).text()===player_table_header_proj_selector}),"FPts"===player_table_header_proj_selector&&(f&&"7"===f?proj_head=proj_head.last():proj_head=proj_head.first()),onMatchupPreviewPage&&(show_rank=!1,show_ros=!1,show_depth=!1,show_spark=!1,show_avg=!1,show_med=!1,show_current=!1);var h=proj_head.first();header_index=h.index(),h.prevAll("th, td").each(function(){header_index+=this.colSpan-1})}override(assignDataFromStorage,"_resolve",applyBefore(function(){storage_translation_data=this.r[storageTranslationKey],isObj(storage_translation_data)||(storage_translation_data={})})),override(setWatch,"_watch",function(){return function(){watchForChanges.run()}});function makeJquery(a){return a instanceof jQuery?a.clone():jQuery(a)}function getIdxSpan(a,b){if(b="undefined"!=typeof b&&b,a&&a.length){var c=0;return jQuery(a[0]).prevAll("td, th").each(function(){c+=this.colSpan}),b&&(c+=a[0].colSpan),c}return!1}var TableUtils=function(){var a=Number.isInteger,b=this;this.addHeader=function(a,b,c){c="undefined"==typeof c?"3%":c,a.each(function(){var a=jQuery(this),d=jQuery(b);a.hasClass("bottom")&&d.addClass("bottom"),a.hasClass("right")&&(a.removeClass("right"),d.addClass("right"));var e=a.next();e.length&&!e.hasClass("horizontal-spacer")&&e.css("width",c),a.after(d)})},this.findIdxSpan=function(b,d){if(d&&d.length&&a(b)&&0<=b){var c,e=jQuery(d[0]).closest("table").find("thead tr.first"),f=0;return e.find("td, th").each(function(){f<=b&&(c=jQuery(this),b=b-this.colSpan+1,f++)}),c}return!1},this.findHeader=function(a,c,d){c="undefined"!=typeof c&&c,d="undefined"!=typeof d&&d;var e,f=new RegExp(a);return!1!==c&&(e=new RegExp(c)),player_table_header.find("th").filter(function(){var a=jQuery(this);if(f.test(a.text())){if(d||!c)return!0;var g=getIdxSpan(a),h=b.findIdxSpan(g,a);return e.test(h.text())}return!1})},this._findSubChildren=function(a){var b=[],c=-1,d=getIdxSpan(a),e=!1,f=a.parent("tr").next("tr").find("td, th");return f.each(function(){var a=jQuery(this);if(e){if(a.hasClass("horizontal-spacer"))return!1;b.push(a)}else c+=this.colSpan,c>=d&&(b.push(a),e=!0)}),b},this.addColspan=function(a,c){if(c="undefined"!=typeof c&&parseInt(c),a&&a.length)if("number"!=typeof c){var d=b._findSubChildren(a),e=d.length;0<e&&a.attr("colspan",e)}else{var f=a[0].colSpan;a.attr("colspan",f+c)}},this.space_cell="<td class=\""+fp+" horizontal-spacer\"></td>",this.space_v_cell="<th class=\""+fp+" vertical-spacer bottom\">&nbsp;</th>",this.addCells=function(c,d,e){a(c)&&0<=c&&(e="undefined"!=typeof e&&e,player_table_rows.each(function(){var a=jQuery(this),f=a.find("td, th"),g=f.eq(c),h=makeJquery(d);g.hasClass("right")&&!g.hasClass(fp)&&(g.removeClass("right"),h.addClass("right")),(g.hasClass("bottom")||a.hasClass("last"))&&h.addClass("bottom"),e&&(h=h.add(jQuery(b.space_cell))),a.hasClass("repeated")&&(g.hasClass("leaf")?h=null:h=b.space_v_cell),g.after(h)}))}},tableUtils=new TableUtils;function canAddColumns(){return-1<header_index||hasProjectionTable}function addColumns(){if(canAddColumns()){var a="<th style=\"width: 2%;\" class=\"leaf "+fp+" "+fp+"Projections "+fp+"ProjectionsHeader\" title=\"Consensus point projections from FantasyPros (via "+fp+")\">FPros</th>",b=jQuery("<td class=\""+fp+" "+fp+"Projections "+fp+"ProjectionsData\">"+loadingDiv+"</td>'");if(onMatchupPreviewPage){b.addClass("text-right");var c="<td class=\"text-right "+fp+" "+fp+"Projections "+fp+"ProjectionsTotal\">--</td>",d="<td class=\""+fp+"\">&nbsp;</td>",e=tableUtils.space_v_cell;if(show_proj){proj_head.each(function(){var a=jQuery(this),b=getIdxSpan(a),c=tableUtils.findIdxSpan(b,a);tableUtils.addColspan(c,1)});var f=player_table_header.find("th").filter(function(){return"Proj"===jQuery(this).text()||"Projected"===jQuery(this).text()});tableUtils.addHeader(f,a,"6%");var g=playerTable.find("tr.scoreboard").closest("table"),h=g.find("thead tr th").filter(function(){return"Projected"===jQuery(this).text()});if(h.length){var i=g.find("tbody tr:last td:last");tableUtils.addColspan(i,1)}}playerTable.each(function(){var a=jQuery(this),f=a.find("th").filter(function(){return"Proj"===jQuery(this).text()||"Projected"===jQuery(this).text()}).first(),g=f.index();if(-1!==g){var h=!1,i=a.find("tbody").find(player_table_row_selector);i.each(function(){var a=jQuery(this),f=a.find("td, th"),i=f.eq(g),j=b;a.hasClass("divider")?h?j=d:(j=c,i.html("--"),i.addClass(fp+"FleaTotal"),h=!0):a.hasClass("scoreboard")?j=c:a.hasClass("repeated")?j=e:"Optimum"===f.first().text()&&(j=d),j=makeJquery(j),i.hasClass("bottom")&&j.addClass("bottom"),i.hasClass("right")&&(i.removeClass("right"),j.addClass("right")),show_proj&&i.after(j)})}})}else{var j="<th class=\""+fp+" horizontal-spacer\"></th>",k="<th style=\"width: 4%;\" class=\"leaf "+fp+" "+fp+"Spark "+fp+"SparkHeader\" title=\"Graph of fantasy points over previous weeks (via "+fp+")\">Trend</th>",l="<th colspan=\"2\" class=\"top left right "+fp+" "+fp+"RankingsTop "+fp+"RankingsTopHeader\" title=\"Projected position rank (lower is better) with 95% confidence interval from FantasyPros (via "+fp+")\">Proj Rank (\xB1Range)</th>",m="<th colspan=\"2\" style=\"text-align: center;\" class=\"leaf left "+fp+" "+fp+"Rankings "+fp+"RankingsHeader\" title=\"Projected position rank (lower is better) for *this week* from FantasyPros (via "+fp+")\">This Week</th>",n="<th colspan=\"2\" style=\"text-align: center;\" class=\"leaf right "+fp+" "+fp+"Ros "+fp+"RosHeader\" title=\"Projected position rank (lower is better) for *the rest of the season* from FantasyPros (via "+fp+")\">Remaining</th>",o="<th style=\"width: 4%;\" class=\"leaf "+fp+" "+fp+"Depth "+fp+"DepthHeader\" title=\"Depth chart information (via "+fp+")\">Depth</th>",p="<td class=\""+fp+" "+fp+"Spark "+fp+"SparkData\">"+loadingDiv+"</td>",q="<td style=\"width: 2%;\" class=\"left "+fp+" "+fp+"Rankings "+fp+"RankingsData\">"+loadingDiv+"</td>",r="<td style=\"width: 2%;\" class=\"right "+fp+" "+fp+"Rankings "+fp+"RankingsStdevData\"></td>",s="<td style=\"width: 2%;\" class=\""+fp+" "+fp+"Ros "+fp+"RosData\">"+loadingDiv+"</td>",t="<td style=\"width: 2%;\" class=\"right "+fp+" "+fp+"Ros "+fp+"RosStdevData\"></td>",u="<td class=\""+fp+" "+fp+"Depth "+fp+"DepthData\">"+loadingDiv+"</td>",v=tableUtils.findHeader("^Rank$",!1,!0);v.css("width","3%");var w=tableUtils.findHeader("^Last [0-9]+$|^Total$|^Avg$","^Fantasy$");w.css("width","4%");var x=tableUtils.findHeader("^Season$");if(x.css("width","5%"),show_depth){var y=player_table_header.find("th").filter(function(){return"Name"===jQuery(this).text()}),z=getIdxSpan(y),A=tableUtils.findIdxSpan(z,y);tableUtils.addHeader(y,o),tableUtils.addColspan(A),tableUtils.addCells(z,u)}var B=getIdxSpan(proj_head),C=tableUtils.findIdxSpan(B,proj_head);if(C&&C.length||(show_proj=!1,show_rank=!1,show_ros=!1),show_proj&&(tableUtils.addHeader(proj_head,a),tableUtils.addColspan(C),tableUtils.addCells(B,b)),show_rank||show_ros){var D=jQuery(l),E=jQuery(j).add(D);C.after(E),show_rank&&show_ros&&tableUtils.addColspan(D,2);var F,G=getIdxSpan(D)-1;if(show_rank){var H=jQuery(m),I=!1;show_ros||(H.addClass("right"),H=H.add(jQuery(j)),I=!0),F=D.parent().next().find("th"),F.eq(G).after(H),tableUtils.addCells(G,q),tableUtils.addCells(G+1,r,I)}if(show_ros){var J=jQuery(n),K=jQuery(s);show_rank?G+=1:(J.addClass("left"),K.addClass("left")),J=J.add(jQuery(j)),F=D.parent().next().find("th"),F.eq(G).after(J),show_rank&&(G+=1),tableUtils.addCells(G,K),tableUtils.addCells(G+1,t,!0)}}if(show_spark){var L=playerTable.find("tr th").filter(function(){return /Season|Avg/.test(jQuery(this).text())}),M=getIdxSpan(L),N=tableUtils.findIdxSpan(M,L);tableUtils.addHeader(L,k),tableUtils.addColspan(N),tableUtils.addCells(M,p)}if(onClubhousePage){var O=player_table_body.find("tr[id^=row].last:first"),P=O.clone();O.find("td").removeClass("bottom"),P.removeAttr("id"),P.addClass("divider strong "+fp);var Q=P.find("td");Q.each(function(a){var b=jQuery(this);b.addClass("bottom"),0===a?(b.addClass(fp),b.html("<span class=\"player\">Total</span>")):(b.empty(),b.removeClass(function(a,b){return(b.match(/(^|\s)FantasyPlus\S+/g)||[]).join("")}),b.addClass(fp),!b.hasClass("horizontal-spacer")&&b.html("&nbsp;"))});var R=getIdxSpan(proj_head),S=Q.eq(R);S.html("\u2014"),S.addClass(fp+"FleaTotal"),show_proj&&(S=S.next(),S.html("\u2014"),S.addClass(fp+"Projections "+fp+"ProjectionsTotal")),S.next().html("\u2014"),S.next().addClass(fp+"ActualTotal"),O.after(P)}}}}override(parseLeagueSettings,"run",applyCompose(function(a){function b(a,b){b="undefined"!=typeof b&&b;var c,p=[],e=i.find("td.table-heading:contains('"+g+"')").closest("tr");c=0<e.parent("thead").length?h.find("tbody tr:first").nextUntil(i,"tr").addBack():e.nextUntil(i,"tr");var k=new RegExp("^"+a+"(?:(s|es))?(?: [(]Quantity[)])?$"),q=c.find("td.left strong").filter(function(){return k.test(jQuery(this).text())}).closest("td.left");if(q&&0<q.length&&jQuery.each(q,function(c,h){var q=jQuery(h),r=q.contents(),s=parseFloat(r[0].textContent),t=!1,u=r[1].textContent.trim();if(-1<u.indexOf(" for every")){t=!0;var v=1,w=q.find("span.for-every");0<w.length&&(v=parseFloat(w.text().trim())),s=parseFloat(s/v)}var x=q.find("strong:contains('(Quantity)')"),y=r.filter("strong:first"),z=r.index(y),A=r.slice(z+1),B="",C=!1,D=!1,E=r.get(z-1).textContent.trim(),F=t&&(/yards? covered/.test(u)||/yards? covered/.test(E));"Kicking"!==g&&F&&(C=!0,D=!0),A.length&&(B=A[0].textContent.trim(),"Kicking"===g&&/Field Goals\? (Made|Missed)/.test(a)?!/^\(/.test(B)&&x.length&&(C=!0):/^\(/.test(B)?F&&(C=!0,D=!0):C=!0);var G=36.36,H=1;if(C===b){var I,J;if(!1===C){if("Kicking"!==g)p.push(s);else if(!F&&(!A.length||/^\(/.test(B)))p.push(s);else{I=A.filter("span.text-muted.low").text().trim();var K=n;I&&(I=parseFloat(I),K=d(f(I,n),o)),J=A.filter("span.text-muted.high").text().trim();var L=o;if(J&&(J=parseFloat(J),L=f(d(J,o),n)),I||J){var M=l.indexOf(K),N=l.indexOf(L),O=l.slice(M,N+1),P=m.slice(M,N+1);if(F){for(var Q=m.slice(N+1),R=0;R<Q.length;R++)P[P.length-1]+=Q[R];for(var S=0,T=0;T<O.length;T++)S+=O[T]*P[T];for(var U=0,V=0;V<P.length;V++)U+=P[V];G=parseFloat(S/U),J&&(G=d(G,J)),I&&(G-=I)}else G=1;H=0;for(var W=0;W<P.length;W++)H+=parseFloat(P[W]/j)}s*=G*H,p.push(s)}}else if(!D&&(!(-1<a.indexOf(" TD"))||x.length)){var X={};X.pts=s,X.is_per=t,I=A.filter("span.text-muted.low").text().trim(),I&&(I=parseFloat(I)),J=A.filter("span.text-muted.high").text().trim(),J&&(J=parseFloat(J)),""!==I&&""===J&&B&&/is exactly/.test(B)&&(J=I),X.low=I,X.high=J,p.push(X)}}}),!1===b){for(var r=0,s=0;s<p.length;s++)r+=p[s];p=r}else 0===p.length&&(p=null);return p}var d=Math.min,f=Math.max,e=a;e.siteType="fleaflicker";for(var g,h=jQuery("#body-center-main > table",this.league_data),i=h.find("tr td.table-heading").closest("tr"),l=[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],m=[0,5,27,68,62,77,78,62,69,57,94,65,71,84,81,71,94,60,93,77,76,89,65,78,56,71,76,80,70,63,63,75,67,57,54,55,58,30,19,6,6,5,1,0,2,0,0,1,0],j=0,k=0;k<m.length;k++)j+=m[k];var n=l[0],o=l[l.length-1];return g="Passing",e.pass_yds=b("Passing Yard")||0,e.pass_yds_bonus=b("Passing Yard",!0),e.pass_tds=b("Passing TD")||0,e.pass_tds_bonus=b("Passing TD",!0),e.pass_ints=b("Interception")||0,e.pass_ints_bonus=b("Interception",!0),e.pass_cmp=b("Passing Completion")||0,e.pass_cmp_bonus=b("Passing Completion",!0),e.pass_icmp=b("Incomplete Pass")||0,e.pass_icmp_bonus=b("Incomplete Pass",!0),e.pass_att=b("Passing Attempt")||0,e.pass_att_bonus=b("Passing Attempt",!0),g="Rushing",e.rush_yds=b("Rushing Yard")||0,e.rush_yds_bonus=b("Rushing Yard",!0),e.rush_tds=b("Rushing TD")||0,e.rush_tds_bonus=b("Rushing TD",!0),e.rush_att=b("Rushing Attempt")||0,e.rush_att_bonus=b("Rushing Attempt",!0),g="Receiving",e.rec_yds=b("Receiving Yard")||0,e.rec_yds_bonus=b("Receiving Yard",!0),e.rec_tds=b("Receiving TD")||0,e.rec_tds_bonus=b("Receiving TD",!0),e.rec_att=b("Catch")||0,e.rec_att_bonus=b("Catch",!0),g="Kicking",e.xpt=b("XP")||0,e.xpt_bonus=b("XP",!0),e.fga=b("Field Goal Attempt")||0,e.fga_bonus=b("Field Goal Attempt",!0),e.fg=b("Field Goals? Made")||0,e.fg_bonus=b("Field Goals? Made",!0),e.fgm=b("Field Goals? Missed")||0,e.fgm_bonus=b("Field Goals? Missed",!0),g="Misc",e.fumbles=b("Fumbles? Lost")||b("Fumble")||0,e.fumbles_bonus=b("Fumbles? Lost",!0)||b("Fumble",!0),g="Defense",e.tka=b("Assisted Tackle")||b("Total Tackle")||0,e.tka_bonus=b("Assisted Tackle",!0)||b("Total Tackle",!0),e.tks=b("Solo Tackle")||b("Total Tackle")||0,e.tks_bonus=b("Solo Tackle",!0)||b("Total Tackle",!0),e.pd=b("Pass(?:es)? Defended")||0,e.pd_bonus=b("Pass(?:es)? Defended",!0),e.ff=b("Fumbles? Forced")||0,e.ff_bonus=b("Fumbles? Forced",!0),e.fr=b("Fumbles? Recovered")||0,e.fr_bonus=b("Fumbles? Recovered",!0),e.sk=b("Sack")||0,e.sk_bonus=b("Sack",!0),e.sf=b("Safety")||0,e.sf_bonus=b("Safety",!0),e.int=b("Interception")||0,e.int_bonus=b("Interception",!0),e.deftd=b("Defensive TD")||b("INT Return TD")||b("Fumble Return TD")||0,e.deftd_bonus=b("Defensive TD",!0)||b("INT Return TD",!0)||b("Fumble Return TD",!0),e.ya=b("Net Yards? Allowed")||0,e.ya_bonus=b("Net Yards? Allowed",!0),e.pa=b("Points? Allowed")||b("Offensive . Special Teams Points? Allowed")||b("Offensive Points? Allowed [(]FG, Pass TD, Rush TD[)]")||0,e.pa_bonus=b("Points? Allowed",!0)||b("Offensive . Special Teams Points? Allowed",!0)||b("Offensive Points? Allowed [(]FG, Pass TD, Rush TD[)]",!0),this.league_settings=e,dlog.log(e),e}));function setDSTname(a){return a.split(" ").pop()}function calcBonus(a,b){var c=Math.min,d=Math.max,e=0,f=parseLeagueSettings.league_settings[a+"_bonus"];if(!(f&&f.length))return e;dlog.info(b);for(var g=0;g<f.length;g++){var h=f[g],i=h.pts,j=h.low,k=h.high,m=h.is_per,n="number"==typeof j,o="number"==typeof k,p=!1;if(m?p=!0:n&&o?p=j<=b&&k>=b:n?p=j<=b:o&&(p=k>=b),p){var q=0;if(m){var r=b;n&&o?(0>=j&&(j+=1),r=d(c(b-j+1,k-j+1),0)):n?r=d(b-j,0):o&&(r=d(c(b,k),0)),q=i*r}else q=i;e+=q}}return e}function calcAdjProjections(){return 0}RowData.prototype._getPlayerInfo=function(){var a,b=this.player_cell.find("div.player-name .player-text"),c=this.player_cell.find("div.player-info"),d=b.text().trim(),e=c.find("span.player-team").text().trim(),f=c.find("span.position").text().trim();if("D/ST"===f){var g=d.split(/\s|\xa0/);d=g[g.length-1],e="-"}else-1<f.indexOf("/")&&(a=f.split("/"),f=[],a.forEach(function(a){f.push(a.trim())}));e in team_abbrev_fix_fleaflicker&&(e=team_abbrev_fix_fleaflicker[e]),d=d.replace("*","");var h=b.attr("href"),i=null;return h&&(i=h.split("-").pop()),{player_name:d,pos_name:f,team_name:e,player_id:i,player_href:h}};function decrementPids(){total_player_ids--,0>=total_player_ids&&fetchFleaflickerIds.resolve()}override(getProjectionData,"_fetchActivityData",function(){return function(a){var b=a.currRow,c=a.player_href,d=a.player_id;jQuery.ajax({url:c,method:"get",timeout:ajax_timeout,context:{curr_row:b,p_href:c,pid:d}}).fail(function(){dlog.log("Could not get player info: "+this.p_href),insertAdjAvg(this.curr_row,null,null,[],[])}).done(function(a){if(!a)dlog.log("No data in player info: "+this.p_href),insertAdjAvg(this.curr_row,null,null,[],[]);else{a=cleanHTML(a);for(var b=jQuery(a),c=activity_data_current_season_site[this.pid],d=c[league_id],e=jQuery("table#table_0",b),f=e.find("tbody").find(player_table_row_selector).not(".divider"),g=f.find("div.pro-opp-matchup").filter(function(){return"BYE"===jQuery(this).text().trim()}),h=g.parents("tr").index(),j=jQuery.map(f,function(a){return jQuery(a).find("td:last").text()}),k=0;k<j.length;k++)k===h?(j[k]=null,c.games_played[k]="BYE"):"\u2014"===j[k]?(j[k]=null,c.games_played[k]=0):""===j[k]?(j[k]=null,c.games_played[k]=null):(j[k]=parseFloat(j[k]),c.games_played[k]=1);c.games_played_updated=current_time,d.last_updated=current_time,d.weekly_points=j,insertAdjAvg(this.curr_row,null,null,c.games_played,d.weekly_points)}})}}),override(getProjectionData,"_popNA",applyBefore(function(){onMatchupPreviewPage&&decrementPids()})),override(getProjectionData,"_calcAndPop",applyBefore(function(a,b){if("depth"===b&&null===a.translation_pos){var c=a.pos_name;if(c.constructor===Array){var d=[];c.forEach(function(a){"DL"===a?d.push("DE","DT"):"DB"===a?d.push("CB","S"):d.push(a)}),c=d}else"DL"===c?c=["DE","DT"]:"DB"===c&&(c=["CB","S"]);a.translation_pos=c}if(onMatchupPreviewPage){for(var e=a.player_href.split("/").pop(),f=e.split("-"),g=[],h=0;h<f.length;h++)g.push(f[h].toUpperCase());var j=g.join(" "),k=storage_translation_data.hasOwnProperty("ID_"+a.player_id),l=alldata.hasOwnProperty(j+"|"+a.getPosName()+"|"+a.team_name);if("D/ST"===c||k||l)l?a.translation_name=j:k&&(a.translation_name=storage_translation_data["ID_"+a.player_id]),decrementPids();else return jQuery.ajax({url:a.player_href,method:"get",timeout:ajax_timeout,context:{datatype:b,rowData:a,self:this}}).done(function(a){var b=cleanHTML(a),c=jQuery(b);this.rowData.translation_name=c.find("#left-container > div.panel > div.panel-heading").text();var d={};return storage_translation_data["ID_"+this.rowData.player_id]=this.rowData.translation_name,d[storageTranslationKey]=storage_translation_data,chrome.storage.local.set(d),this.self._calcAndPop(this.rowData,this.datatype)}).fail(function(){return chrome.runtime.sendMessage({request:"fetch_fail",value:this.rowData.player_href}),popCell(this.rowData.cell,"--",this.datatype)}).always(function(){decrementPids()})}})),override(reDefer,"run",applyAfter(function(){onMatchupPreviewPage&&(fetchFleaflickerIds=jQuery.Deferred())})),isCurrentWeek=function(){return is_current_week},addData.blank="\u2014",override(addData,"_proj",applyBefore(function(a){isCurrentWeek()&&(total_player_ids=a.length)})),addData.projTotals=function(){var a=Math.round;if(onClubhousePage){var b,c,d;b=c=d=0;var e=player_table_body.find("tr td.FantasyPlusProjectionsTotal"),f=getIdxSpan(e),g=player_table_body.find("tr td.FantasyPlusFleaTotal"),h=getIdxSpan(g),i=player_table_body.find("tr td.FantasyPlusActualTotal"),j=getIdxSpan(i),k=player_table_rows.first().nextUntil(".divider").addBack();if(k.each(function(){var a=jQuery(this),e=0;if(show_proj){var g=a.find("td").eq(f);e=parseFloat(g.text()),e&&(b+=e)}var i=a.find("td").eq(h),k=parseFloat(i.text());k&&(c+=k);var l=a.find("td").eq(j),m=parseFloat(l.text());m&&(d+=m)}),show_proj){var l=a(10*b)/10;e.html(l)}var m=a(10*c)/10;g.html(m);var n=a(10*d)/10;i.html(n),dlog.log("totals done"),totalsDone.resolve()}else onMatchupPreviewPage&&(show_proj||fetchFleaflickerIds.resolve(),jQuery.when(fetchFleaflickerIds).done(function(){var b=base_table.find("table tr.scoreboard").closest("table"),c=playerTable.not(b);c.each(function(c){var d=jQuery(this),e=d.find("tbody"),f=0,g=0,h=e.find("tr td.FantasyPlusProjectionsTotal"),i=getIdxSpan(h),j=e.find("tr td.FantasyPlusFleaTotal"),k=getIdxSpan(j),l=e.find(player_table_row_selector).first().nextUntil(".divider").addBack();if(l.each(function(){var a=jQuery(this),b=0;if(show_proj){var c=a.find("td").eq(i);b=parseFloat(c.text()),b&&(f+=b)}var d=a.find("td").eq(k),e=parseFloat(d.text());e&&(g+=e)}),show_proj){var m=a(10*f)/10;h.html(m)}var n=a(10*g)/10;if(j.html(n),show_proj){var o=b.find(".FantasyPlusProjectionsTotal").eq(c);if(o.length){var p=a(100*f)/100;o.html(p)}}}),dlog.log("totals done"),totalsDone.resolve()}))};function _resetTranslation(){onMatchupPreviewPage&&(storage_translation_data={})}watchForChanges.target_selector="div#body",onFreeAgencyPage&&(watchForChanges.observerConfig.characterData=!1,watchForChanges.observerConfig.subtree=!1),watchForChanges._getAcceptedChange=function(a){var b=!1;if(onMatchupPreviewPage)b=!0;else for(var c=0;c<a.length;c++){var d=a[c],e=d.addedNodes;if(e&&e.length)for(var f=0;f<e.length;f++){var g=e[f],h=g.parentElement;h&&"div"===h.localName&&"body"===h.id&&(dlog.log("accepted"),b=!0)}}return b};